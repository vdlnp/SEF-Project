<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard</title>

<style>
body {
    margin: 0;
    font-family: "Segoe UI", Arial, sans-serif;
    background: #1f1d29;
    color: #e6e6e6;
}

header {
    background: #1abc9c;
    color: white;
    padding: 16px 32px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
}

header h1 {
    margin: 0;
    font-size: 22px;
}

.logout {
    text-decoration: none;
    color: white;
    font-weight: 600;
    border: 1px solid rgba(255,255,255,0.6);
    padding: 6px 16px;
    border-radius: 20px;
    transition: all 0.3s ease;
}

.logout:hover {
    background: #2e1b36;
    box-shadow: 0 0 15px rgba(26,188,156,0.7);
    transform: scale(1.05);
}

.container {
    min-height: calc(100vh - 140px);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
}

.cards {
    display: flex;
    gap: 40px;
    justify-content: center;
    flex-wrap: wrap;
}

.card {
    background: #2c2a38;
    padding: 46px 80px;
    border-radius: 14px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.5);
    font-size: 18px;
    font-weight: 600;
    text-align: center;
    color: #1abc9c;
    cursor: pointer;
    transition: all 0.4s ease;
}

.card:hover {
    transform: translateY(-8px) scale(1.05);
    color: white;
    background: linear-gradient(135deg, #1abc9c, #2e1b36);
    box-shadow: 0 12px 30px rgba(0,0,0,0.8), 0 0 20px rgba(26,188,156,0.5);
}

/* MODAL */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.7);
    overflow-y: auto;
}

.modal-content {
    background-color: #2c2a38;
    margin: 3% auto;
    padding: 30px;
    border-radius: 14px;
    width: 90%;
    max-width: 700px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.6);
}

.close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}

.close:hover {
    color: #1abc9c;
}

.modal h2 {
    color: #1abc9c;
    margin-top: 0;
    margin-bottom: 25px;
}

.form-group {
    margin-bottom: 15px;
}

label {
    display: block;
    margin-bottom: 6px;
}

input, textarea, select {
    width: 100%;
    padding: 10px 12px;
    background: #1f1d29;
    border: 1px solid #444;
    color: white;
    border-radius: 6px;
    font-size: 14px;
}

input::placeholder, textarea::placeholder, select option[value=""] {
    color: #bbb;
    font-style: italic;
}

textarea {
    min-height: 80px;
}

/* Date input style */
input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(1);
    cursor: pointer;
}

.btn {
    background: #1abc9c;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    margin-right: 10px;
}

.btn-danger {
    background: #e74c3c;
}

.btn-info {
    background: #3498db;
}

.btn-secondary {
    background: #6c757d;
}

.btn:hover {
    opacity: 0.85;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

th {
    background: #1abc9c;
    padding: 10px;
}

td {
    padding: 10px;
    border-bottom: 1px solid #444;
}

.room-code {
    background: #1abc9c;
    padding: 4px 10px;
    border-radius: 4px;
    font-family: monospace;
}

footer {
    background: #161421;
    text-align: center;
    padding: 12px;
}
</style>
</head>

<body>

<header>
    <h2>Admin Dashboard</h2>
    <a href="#" class="logout">Logout</a>
</header>

<div class="container">
    <div class="cards">
        <div class="card" onclick="openProjectModal()">Create Project Opening</div>
        <div class="card" onclick="openUserModal()">Manage Users</div>
    </div>
</div>

<!-- CREATE PROJECT MODAL -->
<div id="projectModal" class="modal">
<div class="modal-content">
<span class="close" onclick="closeModal('projectModal')">&times;</span>
<h2>Create Project Opening</h2>

<form onsubmit="createProject(event)">
    <div class="form-group">
        <label>Project Title *</label>
        <input type="text" id="projectTitle" placeholder="Enter project title..." required>
    </div>

    <div class="form-group">
        <label>Project Description *</label>
        <textarea id="projectDesc" placeholder="Enter project description..." required></textarea>
    </div>

    <div class="form-group">
        <label>Deadline *</label>
        <input type="date" id="projectDeadline" placeholder="Select a date..." required>
    </div>

    <div class="form-group">
        <label>Room Code (Auto-generated)</label>
        <input type="text" id="roomCode" placeholder="Click 'Generate Room Code'" readonly>
    </div>

    <button type="button" class="btn btn-info" onclick="generateRoomCode()">Generate Room Code</button>
    <button type="submit" class="btn">Create Project</button>
</form>

<div id="projectTable"></div>
</div>
</div>

<!-- MANAGE USERS MODAL -->
<div id="userModal" class="modal">
<div class="modal-content">
<span class="close" onclick="closeModal('userModal')">&times;</span>
<h2>Manage Users</h2>

<form onsubmit="addUser(event)">
    <div class="form-group">
        <label>Full Name *</label>
        <input type="text" id="userName" placeholder="Enter full name..." required>
    </div>

    <div class="form-group">
        <label>Email *</label>
        <input type="email" id="userEmail" placeholder="Enter email..." required>
    </div>

    <div class="form-group">
        <label>Role *</label>
        <select id="userRole" required>
            <option value="">Select role...</option>
            <option>Project Lead</option>
            <option>Reviewer</option>
            <option>Executive Approver</option>
        </select>
    </div>

    <div class="form-group">
        <label>Project Room *</label>
        <select id="userRoom" required>
            <option value="">Select project...</option>
        </select>
    </div>

    <button class="btn">Add User</button>
</form>

<div id="userTable"></div>
</div>
</div>

<footer>
Project Bidding System | Admin Module
</footer>

<script>
let projects = [];
let users = [];

function openProjectModal() {
    projectModal.style.display = "block";
    displayProjects();
}

function openUserModal() {
    userModal.style.display = "block";
    populateRoomDropdown();
    displayUsers();
}

function closeModal(id) {
    document.getElementById(id).style.display = "none";
}

function generateRoomCode() {
    const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    let code = "";
    for (let i = 0; i < 8; i++) {
        code += chars[Math.floor(Math.random() * chars.length)];
    }
    roomCode.value = code;
}

function createProject(e) {
    e.preventDefault();
    if (!roomCode.value) return alert("Generate room code first!");

    projects.push({
        title: projectTitle.value,
        deadline: projectDeadline.value,
        roomCode: roomCode.value
    });

    alert("Project created!");
    e.target.reset();
    roomCode.value = "";
    displayProjects();
}

function displayProjects() {
    if (projects.length === 0) {
        projectTable.innerHTML = "<p>No projects yet</p>";
        return;
    }

    let html = "<table><tr><th>Title</th><th>Deadline</th><th>Room Code</th></tr>";
    projects.forEach(p => {
        html += `<tr>
            <td>${p.title}</td>
            <td>${p.deadline}</td>
            <td><span class="room-code">${p.roomCode}</span></td>
        </tr>`;
    });
    html += "</table>";
    projectTable.innerHTML = html;
}

function populateRoomDropdown() {
    userRoom.innerHTML = "<option value=''>Select project...</option>";
    projects.forEach(p => {
        userRoom.innerHTML += `<option value="${p.roomCode}">${p.title} (${p.roomCode})</option>`;
    });
}

function addUser(e) {
    e.preventDefault();

    users.push({
        name: userName.value,
        email: userEmail.value,
        role: userRole.value,
        room: userRoom.value
    });

    alert("User added!");
    e.target.reset();
    displayUsers();
}

function displayUsers() {
    if (users.length === 0) {
        userTable.innerHTML = "<p>No users added</p>";
        return;
    }

    let html = "<table><tr><th>Name</th><th>Email</th><th>Role</th><th>Room</th><th>Action</th></tr>";
    users.forEach((u, i) => {
        html += `<tr>
            <td>${u.name}</td>
            <td>${u.email}</td>
            <td>${u.role}</td>
            <td><span class="room-code">${u.room}</span></td>
            <td><button class="btn btn-danger" onclick="users.splice(${i},1);displayUsers()">Remove</button></td>
        </tr>`;
    });
    html += "</table>";
    userTable.innerHTML = html;
}

window.onclick = e => {
    if (e.target.classList.contains("modal")) e.target.style.display = "none";
};
</script>

</body>
</html>
